/*
* Kendo UI Beta v2012.3.1322 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

("function"==typeof define&&define.amd?define:function(t,e){return e()})(["./kendo.core.min"],function(){(function(t){function e(t,e){var n=t.x.location,i=t.y.location,o=e.x.location,r=e.y.location,s=n-o,a=i-r;return{center:{x:(n+o)/2,y:(i+r)/2},distance:Math.sqrt(s*s+a*a)}}function n(t){var e,n,i,o=[],s=t.originalEvent,a=0;if(t.api)o.push({id:2,event:t,target:t.target,location:t});else if(t.type.match(/touch/))for(n=s?s.changedTouches:[],e=n.length;e>a;a++)i=n[a],o.push({location:i,event:t,target:i.target,id:i.identifier});else r.pointers?o.push({location:s,event:t,target:t.target,id:s.pointerId}):o.push({id:1,event:t,target:t.target,location:t});return o}function i(e){e.preventDefault();var n=t(e.data.root),i=n.closest(".k-widget").parent();i[0]||(i=n.parent()),i.trigger(t.Event(e.type,{target:n[0]}))}var o=window.kendo,r=o.support,s=r.pointers,a=window.document,c=t(a.documentElement),u=o.Class,h=o.Observable,l=t.now,d=t.extend,f=r.mobileOS,p=f&&f.android,g="press",v="select",_="start",m="move",y="end",T="cancel",x="tap",w="gesturestart",D="gesturechange",S="gestureend",E="gesturetap",M=u.extend({init:function(t,e){var n=this;n.axis=t,n._updateLocationData(e),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=l()},move:function(t){var e=this,n=t["page"+e.axis],i=l(),o=i-e.timeStamp||1;(n||!p)&&(e.delta=n-e.location,e._updateLocationData(t),e.initialDelta=n-e.startLocation,e.velocity=e.delta/o,e.timeStamp=i)},_updateLocationData:function(t){var e=this,n=e.axis;e.location=t["page"+n],e.client=t["client"+n],e.screen=t["screen"+n]}}),b=u.extend({init:function(t,e,n){var i=this;d(i,{x:new M("X",n.location),y:new M("Y",n.location),userEvents:t,target:e,currentTarget:n.currentTarget,id:n.id,_moved:!1,_finished:!1}),i._trigger(g,n)},move:function(t){var e=this;if(!e._finished){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(k.current&&k.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(m,t)}},end:function(t){var e=this;e.endTime=l(),e._finished||(e._moved?e._trigger(y,t):e._trigger(x,t),e.dispose())},dispose:function(){var e=this,n=e.userEvents,i=n.touches;e._finished=!0,i.splice(t.inArray(e,i),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(t){this.startTime=l(),this._moved=!0,this._trigger(_,t)},_trigger:function(t,e){var n=this,i=e.event,o={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(t,o)&&i.preventDefault()},_withinIgnoreThreshold:function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.userEvents.threshold}}),k=h.extend({init:function(e,n){var i,a,u,l,f,p,M=this;if(n=n||{},i=M.filter=n.filter,M.threshold=n.threshold||0,M.touches=[],M._maxTouches=n.multiTouch?2:1,M.allowSelection=n.allowSelection,M.eventNS=o.guid(),e=t(e).handler(M).autoApplyNS(M.eventNS),h.fn.init.call(M),d(M,{element:e,surface:n.global?c:n.surface||e,stopPropagation:n.stopPropagation,pressed:!1}),M.surface.handler(M).autoApplyNS(M.eventNS).on("move","_move").on("up cancel","_end"),e.on("down",i,"_start"),s&&e.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&e.on("dragstart",o.preventDefault),e.on("mousedown selectstart",i,{root:e},"_select"),r.eventCapture)for(a=o.eventMap.up.split(" "),u=0,l=a.length,f=M.surface[0],p=function(t){M._isMoved()&&t.preventDefault()};l>u;u++)f.addEventListener(a[u],p,!0);M.bind([g,x,_,m,y,T,w,D,S,E,v],n)},destroy:function(){var t=this;t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t._disposeAll(),t.unbind()},capture:function(){k.current=this},cancel:function(){this._disposeAll(),this.trigger(T)},notify:function(n,i){var o=this,r=o.touches;if(this._isMultiTouch()){switch(n){case m:n=D;break;case y:n=S;break;case x:n=E}t.extend(i,{touches:r},e(r[0],r[1]))}return this.trigger(n,i)},press:function(t,e,n){this._apiCall("_start",t,e,n)},move:function(t,e){this._apiCall("_move",t,e)},end:function(t,e){this._apiCall("_end",t,e)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){t.each(this.touches,function(){this.dispose()})},_isMoved:function(){return t.grep(this.touches,function(t){return t.isMoved()}).length},_select:function(t){(!this.allowSelection||this.trigger(v,{event:t}))&&i(t)},_start:function(e){var i,o,r=this,s=0,a=r.filter,c=n(e),u=c.length;if(!r._maxTouchesReached())for(k.current=null,r.currentTarget=e.currentTarget,r.stopPropagation&&e.stopPropagation();u>s&&!r._maxTouchesReached();s++)o=c[s],i=t(o.target),i=a?i.is(a)?i:i.closest(a,r.element):r.element,i.length&&(r.touches.push(new b(r,i,o)),r._isMultiTouch()&&r.notify("gesturestart",{}))},_move:function(t){this._eachTouch("move",t)},_end:function(t){this._eachTouch("end",t)},_eachTouch:function(t,e){var i,o,r,s,a=this,c={},u=n(e),h=a.touches;for(i=0;h.length>i;i++)o=h[i],c[o.id]=o;for(i=0;u.length>i;i++)r=u[i],s=c[r.id],s&&s[t](r)},_apiCall:function(e,n,i,o){this[e]({api:!0,pageX:n,pageY:i,target:o||this.element,stopPropagation:t.noop,preventDefault:t.noop})}});o.getTouches=n,o.touchDelta=e,o.UserEvents=k})(window.kendo.jQuery)});